(function(p){var h=[];var t={init:function(u){return this.each(function(){var e=this;var l=p(e).data("cbselect");if(l){return}l={};l.type=p(e).prop("multiple")?"multiple":"single";l.options=typeof u!="undefined"?u:{};l.defaults=p.fn.cbselect.defaults;l.settings=p.extend(true,{},l.defaults,l.options);l.element=p(e);if(l.settings.useData){p.each(l.defaults,function(e,t){if(e!="init"&&e!="useData"){var n=l.element.data("cbselect"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof n!="undefined"){l.settings[e]=n}else{n=l.element.data("cbselect"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof n!="undefined"){l.settings[e]=n}}}})}l.element.triggerHandler("cbselect.init.before",[l]);if(!l.settings.init){return}if(l.settings.tags){var t=l.settings.separator;if(!t){t=[","]}l.settings.tokenSeparators=t}if(l.type=="multiple"||l.settings.tags){if(l.settings.width=="calculate"){l.settings.width="auto"}if(l.settings.height=="calculate"){l.settings.height="auto"}}var n=null;var s=null;if(l.settings.width=="calculate"||l.settings.height=="calculate"){n=l.element.outerWidth()+50;s=l.element.outerHeight();if(l.element.is(":hidden")){var i=l.element.css("width");var a=l.element.css("height");var c=l.element.clone(false).attr({id:"",class:""}).css({position:"absolute",display:"block",visibility:"hidden",width:"auto",height:"auto",minWidth:i&&i!="0px"?i:"auto",minHeight:a&&a!="0px"?a:"auto",padding:l.element.css("padding"),border:l.element.css("border"),margin:l.element.css("margin"),fontFamily:l.element.css("font-family"),fontSize:l.element.css("font-size"),fontWeight:l.element.css("font-weight"),lineHeight:l.element.css("line-height"),boxSizing:l.element.css("box-sizing"),wordSpacing:l.element.css("word-spacing")}).appendTo("body");n=c.outerWidth()+50;s=c.outerHeight();c.remove()}if(l.settings.width=="calculate"){l.settings.width=n}if(l.settings.height=="calculate"){l.settings.height=s}}if(l.settings.width=="element"){n=l.element.outerWidth();if(!n||n=="0px"){n="auto"}}else if(l.settings.width=="copy"||l.settings.width=="resolve"){n=l.element.css("width");if(!n||n=="0px"){n="auto"}}else if(l.settings.width=="off"){n=null}else if(!n){n=l.settings.width}if(l.settings.height=="element"){s=l.element.outerHeight();if(!s||s=="0px"){s="auto"}}else if(l.settings.height=="copy"||l.settings.height=="resolve"){s=l.element.css("height");if(!s||s=="0px"){s="auto"}}else if(l.settings.height=="off"){s=null}else if(!s){s=l.settings.height}var o=null;if(l.type=="multiple"){if(n=="auto"&&l.settings.placeholder){var r=p("<span>"+l.settings.placeholder+"</span>").css({position:"absolute",display:"block",visibility:"hidden",padding:l.element.css("padding"),border:l.element.css("border"),margin:l.element.css("margin"),fontFamily:l.element.css("font-family"),fontSize:l.element.css("font-size"),fontWeight:l.element.css("font-weight"),lineHeight:l.element.css("line-height"),boxSizing:l.element.css("box-sizing"),wordSpacing:l.element.css("word-spacing")}).appendTo("body");o=r.outerWidth()+5;r.remove()}}else if(l.settings.placeholder){l.settings.allowClear=true}var d=l.element.is('.cbTooltip,[data-hascbtooltip="true"]');if(d){l.element.attr("data-cbtooltip-open-target","#cbselect_"+l.element.attr("id"));l.element.attr("data-cbtooltip-close-target","#cbselect_"+l.element.attr("id"));l.element.attr("data-cbtooltip-position-target","#cbselect_"+l.element.attr("id"));l.element.data("cbtooltip-open-target","#cbselect_"+l.element.attr("id"));l.element.data("cbtooltip-close-target","#cbselect_"+l.element.attr("id"));l.element.data("cbtooltip-position-target","#cbselect_"+l.element.attr("id"))}var f=[];p.each(l.element.attr("class").split(/\s+/),function(e,t){if(t!="cbTooltip"&&t!="cbSelect"){f.push(t)}});var m=p.extend(true,{},l.settings);delete m["separator"];delete m["containerCssClass"];delete m["dropdownCssClass"];if(l.settings.theme=="bootstrap"&&(l.type=="multiple"||l.settings.tags)&&!("templateSelection"in m)){m["templateSelection"]=function(e,t){t.addClass("badge badge-primary");return p.fn.select2.defaults.defaults.templateSelection(e,t)}}l.element.select2(m);l.select2=l.element.data("select2");l.container=l.select2.$container;l.dropdown=l.select2.$dropdown;if(o){l.select2.$selection.css("min-width",o)}p.each(f,function(e,t){l.container.addClass(t)});l.container.attr("tabindex",0);if(l.settings.theme=="bootstrap"){if(!l.settings.tags&&l.container.hasClass("form-control")){l.container.addClass("custom-select");if(l.container.hasClass("form-control-sm")){l.container.addClass("custom-select-sm")}else if(l.container.hasClass("form-control-lg")){l.container.addClass("custom-select-lg")}}l.dropdown.find(".select2-dropdown").addClass("bg-white border");l.dropdown.find(".select2-search__field").addClass("form-control");l.container.find(".select2-search__field").addClass("form-control");if(l.container.hasClass("form-control-sm")){l.dropdown.find(".select2-dropdown").addClass("text-small");l.dropdown.find(".select2-search__field").addClass("form-control-sm");l.container.find(".select2-search__field").addClass("form-control-sm")}else if(l.container.hasClass("form-control-lg")){l.dropdown.find(".select2-dropdown").addClass("text-large");l.dropdown.find(".select2-search__field").addClass("form-control-lg");l.container.find(".select2-search__field").addClass("form-control-lg")}}l.dropdown.addClass("cb_template");if(l.type=="multiple"){l.dropdown.addClass("select2-container--multiple");l.container.addClass("select2-container--multiple")}else{l.dropdown.addClass("select2-container--single");l.container.addClass("select2-container--single")}if(l.settings.tags){l.dropdown.addClass("select2-container--tags");l.container.addClass("select2-container--tags")}g(l);l.container.on("keyup.cbselect",".select2-search__field",function(){g(l)}).on("click.cbselect",function(e){if(e.target!==this){return}l.element.cbselect("toggle")});l.element.on("select2:open.cbselect",function(){g(l);l.element.triggerHandler("cbselect.open",[l])}).on("select2:close.cbselect",function(){g(l);l.element.triggerHandler("cbselect.close",[l])}).on("select2:select.cbselect",function(e){g(l);if(l.settings.placeholder){l.element.cbselect("unset",l.select2.selection.placeholder.id)}l.element.triggerHandler("cbselect.selecting",[l,e.params.data.id,e.params.data.element])}).on("select2:unselect.cbselect",function(e){g(l);if(l.settings.placeholder&&l.element.cbselect("get")===null){l.element.cbselect("set",l.select2.selection.placeholder.id)}l.element.triggerHandler("cbselect.removing",[l,e.params.data.id,e.params.data.element])});l.container.attr("id","cbselect_"+l.element.attr("id"));if(s&&s!="0px"){l.container.css("height",s)}if(l.settings.containerCssClass){l.container.addClass(l.settings.containerCssClass)}if(l.settings.dropdownCssClass){l.dropdown.addClass(l.settings.dropdownCssClass)}l.element.on("change.cbselect",function(){if(typeof cbParamChange!="undefined"){cbParamChange.call(this)}});l.element.on("remove.cbselect destroy.cbselect",function(){l.element.cbselect("destroy")});l.element.on("rebind.cbselect",function(){l.element.cbselect("rebind")});l.element.on("modified.cbselect",function(e,t,n,s){if(t!=n){l.element.cbselect("rebind")}});l.element.on("cloning.cbselect",function(){p(this).cbselect("destroy");p(this).on("rebind.cbselect",function(){p(this).off("rebind.cbselect");l.element.cbselect(l.options)});p(this).on("cloned.cbselect",function(){p(this).off("cloned.cbselect");p(this).cbselect(l.options)});return true});l.element.triggerHandler("cbselect.init.after",[l]);l.element.data("cbselect",l);h.push(l)})},toggle:function(){var e=p(this).data("cbselect");if(!e){return this}if(e.container.hasClass("select2-container--open")){e.element.select2("close")}else{e.element.select2("open")}return this},open:function(){var e=p(this).data("cbselect");if(!e){return this}e.element.select2("open");return this},close:function(e){var t=p(this).data("cbselect");if(!t){return this}t.element.select2("close");return this},get:function(){var e=p(this).data("cbselect");if(!e){return null}return e.element.val()},set:function(e){var t=p(this).data("cbselect");if(!t){return null}t.element.val(e).trigger("change");return t.element.cbselect("get")},unset:function(e){var t=p(this).data("cbselect");if(!t){return null}if(!p.isArray(e)){e=[e]}var n=t.element.cbselect("get");var s=n;var l=false;if(p.isArray(n)){p.each(e,function(e,t){if(s.indexOf(t)>-1){s.splice(s.indexOf(t),1);l=true}})}else{p.each(e,function(e,t){if(t===n){s="";l=true;return false}})}if(l){return t.element.cbselect("set",s)}else{return n}},enable:function(){var e=p(this).data("cbselect");if(!e){return this}e.element.prop("disabled",false);return this},disable:function(){var e=p(this).data("cbselect");if(!e){return this}e.element.prop("disabled",true);return this},container:function(){var e=p(this).data("cbselect");if(!e){return this}return e.container},dropdown:function(){var e=p(this).data("cbselect");if(!e){return this}return e.dropdown},rebind:function(){var e=p(this).data("cbselect");if(!e){return this}e.element.cbselect("destroy");e.element.cbselect(e.options);return this},destroy:function(){var n=p(this).data("cbselect");if(!n){return this}n.element.off(".cbselect");n.element.removeData("cbselect");if(n.element.is('.cbTooltip,[data-hascbtooltip="true"]')){n.element.removeAttr("data-cbtooltip-open-target");n.element.removeAttr("data-cbtooltip-close-target");n.element.removeAttr("data-cbtooltip-position-target");n.element.removeData("cbtooltip-open-target");n.element.removeData("cbtooltip-close-target");n.element.removeData("cbtooltip-position-target")}n.element.select2("destroy");p.each(h,function(e,t){if(t.element==n.element){h.splice(e,1);return false}return true});n.element.triggerHandler("cbselect.destroyed",[n]);return this},instances:function(){return h}};function g(e){if(!e.element.children().length){e.dropdown.addClass("select2-container--empty");e.container.addClass("select2-container--empty")}else{e.dropdown.removeClass("select2-container--empty");e.container.removeClass("select2-container--empty")}}p.fn.cbselect=function(e){if(t[e]){return t[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.init.apply(this,arguments)}return this};p.fn.cbselect.defaults={init:true,useData:true,tags:false,separator:null,placeholder:null,closeOnSelect:true,selectOnClose:false,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,dropdownCssClass:null,containerCssClass:null,dropdownAutoWidth:true,theme:"bootstrap",width:"calculate",height:"off"}})(jQuery);